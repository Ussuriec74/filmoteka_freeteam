var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},d=e.parcelRequired7c6;null==d&&((d=function(e){if(e in t)return t[e].exports;if(e in a){var d=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,d.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},e.parcelRequired7c6=d),d("2nhTy"),d("8Yq9A"),d("dLF68"),d("6MKOn"),d("04jNI");var o=d("i3bGI"),n=d("5dNya"),r=d("5uEKZ");d("5uEKZ"),r=d("5uEKZ");const c=new(0,o.default);let i,l="";let u={gallery:document.querySelector(".library-gallery__list"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};async function s(e){e.preventDefault(),u.gallery.removeEventListener("click",s),i=e.target.dataset.id,"IMG"===e.target.nodeName&&(v(),await m(i),u.addToWatched.addEventListener("click",y),u.addToQueue.addEventListener("click",L))}(0,r.checkItemInStorage)("watchedFilms","queueFilms",[]),u.gallery.addEventListener("click",s);const m=async e=>{try{const t=await c.fetchFilmById(e),a=await t.genres.map((e=>e.name)).join(", "),d={...t,listOfGenders:a};return l=(0,n.filmModalMarkup)(d),u.backdrop.innerHTML=l,u.closeFilmModalBtn=document.querySelector("[data-modal-close]"),u.addToWatched=document.querySelector(".add-to-watched"),u.addToQueue=document.querySelector(".add-to-queue"),await function(e){if(!(0,r.inStorageWatched)(e))return void(u.addToWatched.textContent="Add to watched");(0,r.inStorageWatched)(e)&&(u.addToWatched.textContent="Remove from watched")}(e),await function(e){if(!(0,r.inStorageQueue)(e))return void(u.addToQueue.textContent="Add to queue");(0,r.inStorageQueue)(e)&&(u.addToQueue.textContent="Remove from queue")}(e),await function(){"Add to watched"===u.addToWatched.textContent?u.addToWatched.classList.remove("is-in-storage"):u.addToWatched.classList.add("is-in-storage");"Add to queue"===u.addToQueue.textContent?u.addToQueue.classList.remove("is-in-storage"):u.addToQueue.classList.add("is-in-storage")}(),u.closeFilmModalBtn.addEventListener("click",g),u.backdrop.addEventListener("click",h),window.addEventListener("keydown",f),u.backdrop}catch(e){console.log(e.message)}};function g(e){e.preventDefault(),u.gallery.addEventListener("click",s),v(),u.backdrop.innerHTML="",T()}function f(e){e.preventDefault(),"Escape"===e.code&&(u.gallery.addEventListener("click",s),v(),u.backdrop.innerHTML="",T())}function h(e){e.preventDefault(),e.currentTarget===e.target&&(u.gallery.addEventListener("click",s),v(),u.backdrop.innerHTML="",T())}function v(){u.backdrop.classList.toggle("is-hidden")}function T(){u.closeFilmModalBtn.removeEventListener("click",g),window.removeEventListener("keydown",f),u.backdrop.removeEventListener("click",h)}function y(e){e.preventDefault(),i=e.target.dataset.modalaction,console.log(i),console.log("Ви натиснули на кнопку WATCHED, ID цієї картки - ",i),null==localStorage.getItem("watchedFilms")&&(0,r.addToStorageWhenNull)("watchedFilms",i),(0,r.inStorageWatched)(i)?((0,r.removeFromStorage)("watchedFilms",i),u.addToWatched.textContent="Add to watched",u.addToWatched.classList.remove("is-in-storage")):((0,r.addToStorage)("watchedFilms",i),u.addToWatched.textContent="Remove from watched",u.addToWatched.classList.add("is-in-storage"))}function L(e){e.preventDefault(),console.log("Ви натиснули на кнопку QUEUE, ID цієї картки - ",i),null==localStorage.getItem("queueFilms")&&(0,r.addToStorageWhenNull)("queueFilms",i),(0,r.inStorageQueue)(i)?((0,r.removeFromStorage)("queueFilms",i),u.addToQueue.textContent="Add to queue",u.addToQueue.classList.remove("is-in-storage")):((0,r.addToStorage)("queueFilms",i),u.addToQueue.textContent="Remove from queue",u.addToQueue.classList.add("is-in-storage"))}({headerButtons:document.querySelector(".header__buttons")}).headerButtons.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const t=document.querySelector(".current__button"),a=e.target;t&&t.classList.remove("current__button");a.classList.add("current__button")}));o=d("i3bGI");var w=d("bcxib"),p=d("5r59o");const k={watchedBtn:document.querySelector('[name="watched"]'),queueBtn:document.querySelector('[name="queue"]')},b=new(0,o.default),q=(0,w.load)("queueFilms"),E=(0,w.load)("watchedFilms");function S(){(0,p.clearLibraryGallery)(),E.map((e=>b.fetchFilmById(e).then((e=>{(0,p.renderLibrary)(e)}))))}S(),k.watchedBtn.addEventListener("click",S),k.queueBtn.addEventListener("click",(function(){(0,p.clearLibraryGallery)(),q.map((e=>b.fetchFilmById(e).then((e=>{(0,p.renderLibrary)(e)}))))}));
//# sourceMappingURL=library.9c968028.js.map
