!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o("4Nugj");var a=o("4Nugj"),c=o("jcFG7"),i=o("18yUV"),u=o("bq49u"),s=new(0,i.default);function l(){s.fetchTrendingFilms().then(v)}function d(){s.fetchFilmsOnSearch().then(v)}l();var f=document.querySelector(".pagination ul");function m(e){if("LI"===e.target.nodeName){a.refs.gallery.innerHTML="";var t=document.querySelectorAll(".numb"),n=document.querySelector(".arrow-right"),r=document.querySelector(".arrow-left");e.target===r&&(s.pageDecrement(),null!==s.searchQuery&&""!==s.searchQuery?d():l());var o=!0,c=!1,i=void 0;try{for(var u,f=t[Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var m=u.value;e.target===m&&(s.setPage(Number(e.target.textContent)),null!==s.searchQuery&&""!==s.searchQuery?d():l())}}catch(e){c=!0,i=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw i}}e.target===n&&(s.pageIncrement(),null!==s.searchQuery&&""!==s.searchQuery?d():l())}}function v(e){var t=e.page,n=e.total_pages;(0,u.renderGallery)(e.results),(0,c.default)(n,t)}f.addEventListener("click",m),a.refs.searchForm.addEventListener("submit",(function(e){if(e.preventDefault(),s.resetPage(),s.query=e.target.elements.userSearchQuery.value.trim(),""===s.searchQuery||" "===s.searchQuery)return void a.refs.searchError.classList.remove("is-hidden");s.fetchFilmsOnSearch().then((function(e){if(0===e.total_results)return a.refs.searchError.classList.remove("is-hidden"),void f.removeEventListener("click",m);a.refs.searchError.classList.add("is-hidden"),d(),f.addEventListener("click",m)}))})),o("7F1pg"),o("gHeeA"),o("4xL4O"),o("j1lrD");var h,p=o("bpxeT"),g=o("dDDEV"),y=o("2TvXO"),b=(i=o("18yUV"),o("6D8Ko")),w=o("jzQFI"),L=(o("jzQFI"),w=o("jzQFI"),new(0,i.default)),T="",x="Add to watched",E="Add to queue",k="Remove from watched",S="Remove from queue",F={gallery:document.querySelector(".gallery"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};function q(e){return Q.apply(this,arguments)}function Q(){return(Q=e(p)(e(y).mark((function t(n){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),h=n.target.dataset.id,"IMG"===n.target.nodeName){e.next=4;break}return e.abrupt("return");case 4:return I(),e.next=7,M(h);case 7:F.gallery.removeEventListener("click",q),F.addToWatched.addEventListener("click",_),F.addToQueue.addEventListener("click",j);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}(0,w.checkItemInStorage)("watchedFilms","queueFilms",[]),F.gallery.addEventListener("click",q);var C,M=(C=e(p)(e(y).mark((function t(n){var r,o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.fetchFilmById(n);case 3:return r=t.sent,t.next=6,r.genres.map((function(e){return e.name})).join(", ");case 6:return o=t.sent,a=e(g)({},r,{listOfGenders:o}),T=(0,b.filmModalMarkup)(a),F.backdrop.innerHTML=T,document.body.style.overflow="hidden",F.closeFilmModalBtn=document.querySelector("[data-modal-close]"),F.addToWatched=document.querySelector(".add-to-watched"),F.addToQueue=document.querySelector(".add-to-queue"),t.next=16,A(n);case 16:return t.next=18,H(n);case 18:return t.next=20,P();case 20:return F.closeFilmModalBtn.addEventListener("click",D),F.backdrop.addEventListener("click",O),window.addEventListener("keydown",N),t.abrupt("return",F.backdrop);case 26:t.prev=26,t.t0=t.catch(0),console.log(t.t0.message);case 29:case"end":return t.stop()}}),t,null,[[0,26]])}))),function(e){return C.apply(this,arguments)});function D(e){e.preventDefault(),F.gallery.addEventListener("click",q),I(),F.backdrop.innerHTML="",document.body.style.overflow="",W()}function N(e){e.preventDefault(),"Escape"===e.code&&(F.gallery.addEventListener("click",q),I(),F.backdrop.innerHTML="",document.body.style.overflow="",W())}function O(e){e.preventDefault(),e.currentTarget===e.target&&(F.gallery.addEventListener("click",q),I(),F.backdrop.innerHTML="",document.body.style.overflow="",W())}function I(){F.backdrop.classList.toggle("is-hidden")}function W(){F.closeFilmModalBtn.removeEventListener("click",D),window.removeEventListener("keydown",N),F.backdrop.removeEventListener("click",O)}function _(e){e.preventDefault(),h=e.target.dataset.modalaction,null==localStorage.getItem("watchedFilms")&&(0,w.addToStorageWhenNull)("watchedFilms",h),(0,w.inStorageWatched)(h)?((0,w.removeFromStorage)("watchedFilms",h),F.addToWatched.textContent=x,F.addToWatched.classList.remove("is-in-storage")):((0,w.addToStorage)("watchedFilms",h),F.addToWatched.textContent=k,F.addToWatched.classList.add("is-in-storage"))}function j(e){e.preventDefault(),null==localStorage.getItem("queueFilms")&&(0,w.addToStorageWhenNull)("queueFilms",h),(0,w.inStorageQueue)(h)?((0,w.removeFromStorage)("queueFilms",h),F.addToQueue.textContent=E,F.addToQueue.classList.remove("is-in-storage")):((0,w.addToStorage)("queueFilms",h),F.addToQueue.textContent=S,F.addToQueue.classList.add("is-in-storage"))}function A(e){(0,w.inStorageWatched)(e)?(0,w.inStorageWatched)(e)&&(F.addToWatched.textContent=k):F.addToWatched.textContent=x}function H(e){(0,w.inStorageQueue)(e)?(0,w.inStorageQueue)(e)&&(F.addToQueue.textContent=S):F.addToQueue.textContent=E}function P(){F.addToWatched.textContent===x?F.addToWatched.classList.remove("is-in-storage"):F.addToWatched.classList.add("is-in-storage"),F.addToQueue.textContent===E?F.addToQueue.classList.remove("is-in-storage"):F.addToQueue.classList.add("is-in-storage")}p=o("bpxeT"),y=o("2TvXO"),i=o("18yUV");var U={};U=function e(t,n,r){function o(c,i){if(!n[c]){if(!t[c]){var u=void 0;if(!i&&u)return u(c,!0);if(a)return a(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[c]={exports:{}};t[c][0].call(l.exports,(function(e){return o(t[c][1][e]||e)}),l,l.exports,e,t,n,r)}return n[c].exports}for(var a=void 0,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},o=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},a=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=a,n.create=function(e,t){var n=function(e,t){var n=r('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),a=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return a.appendChild(e)}));var c=o(a,"IMG"),i=o(a,"VIDEO"),u=o(a,"IFRAME");return!0===c&&n.classList.add("basicLightbox--img"),!0===i&&n.classList.add("basicLightbox--video"),!0===u&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(r(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),c=function(e){return!1!==t.onClose(i)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===a(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(i)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&c()}));var i={element:function(){return n},visible:function(){return a(n)},show:function(e){return!1!==t.onShow(i)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(i)}))},close:c};return i}},{}]},{},[1])(1);var B,G,V=[],R=new(0,i.default),z={gallery:document.querySelector(".gallery"),watchTrailer:""};function X(){return(X=e(p)(e(y).mark((function t(n){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("IMG"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return B=n.target.dataset.id,e.next=5,K(B);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}z.gallery.addEventListener("click",(function(e){return X.apply(this,arguments)}));var K=function(){var t=e(p)(e(y).mark((function t(n){var r;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.fetchTrailerById(n);case 3:r=e.sent,G=null,V=[],r.results.forEach((function(e){if(e.name.includes("Official")){var t=e.key;V.push("https://www.youtube.com/embed/".concat(t)),G=V[0]}})),setTimeout((function(){z.watchTrailer=document.querySelector(".player"),z.watchTrailer.addEventListener("click",Y)}),500),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();function Y(){null!=G?U.create("\n    <iframe src='".concat(G,'\'frameborder="0" allowfullscreen class="trailer_video"></iframe>')).show():z.watchTrailer.textContent="sorry, trailer is not found"}i=o("18yUV");var J=o("9ekLB");(new(0,i.default)).fetchGenres().then((function(e){(0,J.save)("genres",e.genres)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#toTop");window.addEventListener("scroll",(function(){pageYOffset>100?e.classList.add("show"):e.classList.remove("show")})),e.onclick=function(e){e.preventDefault(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700,n=document.scrollingElement||document.documentElement,r=n.scrollTop,o=e-r,a=+new Date,c=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},i=function(){var u=+new Date-a;n.scrollTop=parseInt(c(u,r,o,t)),u<t?requestAnimationFrame(i):n.scrollTop=e};i()}(0,400)}}))}();
//# sourceMappingURL=index.2b68d022.js.map
