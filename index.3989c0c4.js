var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o),o("krGWQ");var a=o("krGWQ"),r=o("2nhTy"),l=o("i3bGI"),s=o("5r59o");const c=new(0,l.default);function i(){c.fetchTrendingFilms().then(f)}function d(){c.fetchFilmsOnSearch().then(f)}i();const u=document.querySelector(".pagination ul");function m(e){if("LI"!==e.target.nodeName)return;a.refs.gallery.innerHTML="";const t=document.querySelectorAll(".numb"),n=document.querySelector(".arrow-right"),o=document.querySelector(".arrow-left");e.target===o&&(c.pageDecrement(),null!==c.searchQuery&&""!==c.searchQuery?d():i());for(const n of t)e.target===n&&(c.setPage(Number(e.target.textContent)),null!==c.searchQuery&&""!==c.searchQuery?d():i());e.target===n&&(c.pageIncrement(),null!==c.searchQuery&&""!==c.searchQuery?d():i())}function f(e){const t=e.page,n=e.total_pages;(0,s.renderGallery)(e.results),(0,r.default)(n,t)}u.addEventListener("click",m),a.refs.searchForm.addEventListener("submit",(function(e){if(e.preventDefault(),c.resetPage(),c.query=e.target.elements.userSearchQuery.value.trim(),""===c.searchQuery||" "===c.searchQuery)return void a.refs.searchError.classList.remove("is-hidden");c.fetchFilmsOnSearch().then((e=>{if(0===e.total_results)return a.refs.searchError.classList.remove("is-hidden"),void u.removeEventListener("click",m);a.refs.searchError.classList.add("is-hidden"),d(),u.addEventListener("click",m)}))})),o("8Yq9A"),o("dLF68"),o("6MKOn"),o("04jNI");l=o("i3bGI");function h({poster_path:e,title:t,vote_average:n,vote_count:o,popularity:a,original_title:r,listOfGenders:l,overview:s,id:c}){return`\n    <div class="modal" data-modal-id="${c}">\n        <div class="modal__poster">\n            <img\n                class="modal__img"\n                src="${e?`https://image.tmdb.org/t/p/w500${e}`:"https://via.placeholder.com/270x400/5C5A5B/ffffff.png?text=NO+POSTER"}"\n                alt="${t}"\n                />\n        </div>\n    \n        <div class="modal__content">\n            <h2 class="modal__content-title">${t}</h2>\n            <table class="modal__content-info">\n                <tr>\n                    <td class="modal__content-name">Vote / Votes</td>\n                    <td class="modal__content-name-value">\n                        <span class="modal__content-rate">${n}</span>\n                        /\n                        <span class="modal__content-rates">${o}</span>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Popularity</td>\n                    <td class="modal__content-name-value">${a}</td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Original Title</td>\n                    <td class="modal__content-name-value--title">${r||"No Title"}</td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Genre</td>\n                    <td class="modal__content-name-value">${l||"Genres did not marked"}</td>\n                </tr>\n            </table>\n        \n            <div class="modal__about">\n                <h3 class="modal__about-title">About</h3>\n                <p class="modal__about-description">${s||"Unfortunately we have no discription about this film"}</p>\n            </div>\n        \n            <div class="modal__btns">\n                <div class="modal__btns-wrapper">\n                    <button class="modal__btn add-to-watched" type="button" data-modalaction="${c}">\n                    Add to watched\n                    </button>\n                    <button class="modal__btn add-to-queue" type="button" data-modalaction="${c}">\n                    Add to queue\n                    </button>\n                </div>\n                <button  type="button" class="modal__btn player" data-player-action="${c}">watch the trailer</button>\n            </div>\n            <button class="modal__close" type="button" data-modal-close aria-label="close-modal">\n                <svg class="modal__close-svg" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M8 8L22 22" stroke="black" stroke-width="2"/>\n                    <path d="M8 22L22 8" stroke="black" stroke-width="2"/>\n                </svg>\n            </button>\n        </div>\n    </div>\n    `}function g(e){return null!=localStorage.getItem("watchedFilms")&&!![...JSON.parse(localStorage.getItem("watchedFilms"))].includes(e)}function v(e){return null!=localStorage.getItem("queueFilms")&&!![...JSON.parse(localStorage.getItem("queueFilms"))].includes(e)}const p=(e,t)=>{let n=[t];try{const t=JSON.stringify(n);localStorage.setItem(e,t)}catch(e){console.error("You have an (ADD TO LOCAL STORAGE) error when add your first film: ",e.message)}},b=(e,t)=>{let n=[...JSON.parse(localStorage.getItem(e))];console.log(n),n.push(t),console.log(n);try{const t=JSON.stringify(n);localStorage.setItem(e,t)}catch(e){console.error("You have an (ADD TO LOCAL STORAGE) error: ",e.message)}},y=(e,t)=>{let n=[...JSON.parse(localStorage.getItem(e))];const o=n.indexOf(t);n.splice(o,1);try{const t=JSON.stringify(n);localStorage.setItem(e,t)}catch(e){console.error("You have a (WRITING TO LOCAL STORAGE) error after REMOVING: ",e.message)}},w=new(0,l.default);let _,L="";let T={gallery:document.querySelector(".gallery"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};var E,S,k;async function O(e){e.preventDefault(),T.gallery.removeEventListener("click",O),_=e.target.dataset.id,"IMG"===e.target.nodeName&&(C(),await x(_),T.addToWatched.addEventListener("click",A),T.addToQueue.addEventListener("click",M))}E="watchedFilms",S="queueFilms",k=[],localStorage.getItem(E)||localStorage.setItem(E,JSON.stringify(k)),localStorage.getItem(S)||localStorage.setItem(S,JSON.stringify(k)),T.gallery.addEventListener("click",O);const x=async e=>{try{const t=await w.fetchFilmById(e),n=await t.genres.map((e=>e.name)).join(", "),o={...t,listOfGenders:n};return L=h(o),T.backdrop.innerHTML=L,T.closeFilmModalBtn=document.querySelector("[data-modal-close]"),T.addToWatched=document.querySelector(".add-to-watched"),T.addToQueue=document.querySelector(".add-to-queue"),await function(e){if(!g(e))return void(T.addToWatched.textContent="Add to watched");g(e)&&(T.addToWatched.textContent="Remove from watched")}(e),await function(e){if(!v(e))return void(T.addToQueue.textContent="Add to queue");v(e)&&(T.addToQueue.textContent="Remove from queue")}(e),await function(){"Add to watched"===T.addToWatched.textContent?T.addToWatched.classList.remove("is-in-storage"):T.addToWatched.classList.add("is-in-storage");"Add to queue"===T.addToQueue.textContent?T.addToQueue.classList.remove("is-in-storage"):T.addToQueue.classList.add("is-in-storage")}(),T.closeFilmModalBtn.addEventListener("click",I),T.backdrop.addEventListener("click",N),window.addEventListener("keydown",q),T.backdrop}catch(e){console.log(e.message)}};function I(e){e.preventDefault(),T.gallery.addEventListener("click",O),C(),T.backdrop.innerHTML="",F()}function q(e){e.preventDefault(),"Escape"===e.code&&(T.gallery.addEventListener("click",O),C(),T.backdrop.innerHTML="",F())}function N(e){e.preventDefault(),e.currentTarget===e.target&&(T.gallery.addEventListener("click",O),C(),T.backdrop.innerHTML="",F())}function C(){T.backdrop.classList.toggle("is-hidden")}function F(){T.closeFilmModalBtn.removeEventListener("click",I),window.removeEventListener("keydown",q),T.backdrop.removeEventListener("click",N)}function A(e){e.preventDefault(),_=e.target.dataset.modalaction,console.log(_),console.log("Ви натиснули на кнопку WATCHED, ID цієї картки - ",_),null==localStorage.getItem("watchedFilms")&&p("watchedFilms",_),g(_)?(y("watchedFilms",_),T.addToWatched.textContent="Add to watched",T.addToWatched.classList.remove("is-in-storage")):(b("watchedFilms",_),T.addToWatched.textContent="Remove from watched",T.addToWatched.classList.add("is-in-storage"))}function M(e){e.preventDefault(),console.log("Ви натиснули на кнопку QUEUE, ID цієї картки - ",_),null==localStorage.getItem("queueFilms")&&p("queueFilms",_),v(_)?(y("queueFilms",_),T.addToQueue.textContent="Add to queue",T.addToQueue.classList.remove("is-in-storage")):(b("queueFilms",_),T.addToQueue.textContent="Remove from queue",T.addToQueue.classList.add("is-in-storage"))}l=o("i3bGI");var Q={};Q=function e(t,n,o){function a(l,s){if(!n[l]){if(!t[l]){var c=void 0;if(!s&&c)return c(l,!0);if(r)return r(l,!0);var i=new Error("Cannot find module '"+l+"'");throw i.code="MODULE_NOT_FOUND",i}var d=n[l]={exports:{}};t[l][0].call(d.exports,(function(e){return a(t[l][1][e]||e)}),d,d.exports,e,t,n,o)}return n[l].exports}for(var r=void 0,l=0;l<o.length;l++)a(o[l]);return a}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},a=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},r=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=r,n.create=function(e,t){var n=function(e,t){var n=o('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),r=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return r.appendChild(e)}));var l=a(r,"IMG"),s=a(r,"VIDEO"),c=a(r,"IFRAME");return!0===l&&n.classList.add("basicLightbox--img"),!0===s&&n.classList.add("basicLightbox--video"),!0===c&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(o(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),l=function(e){return!1!==t.onClose(s)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===r(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(s)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&l()}));var s={element:function(){return n},visible:function(){return r(n)},show:function(e){return!1!==t.onShow(s)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(s)}))},close:l};return s}},{}]},{},[1])(1);let D=[];const G=new(0,l.default);let W,$,R={gallery:document.querySelector(".gallery"),watchTrailer:""};R.gallery.addEventListener("click",(async function(e){if("IMG"!==e.target.nodeName)return;W=e.target.dataset.id,await P(W)}));const P=async e=>{try{const t=await G.fetchTrailerById(e);D=[],t.results.forEach((e=>{if(e.name.includes("Official Trailer")){const t=e.key;D.push(`https://www.youtube.com/embed/${t}`),$=D[0]}})),setTimeout((()=>{R.watchTrailer=document.querySelector(".player"),R.watchTrailer.addEventListener("click",J)}),500)}catch(e){console.log(e.message)}};function J(){Q.create(`\n    <iframe src='${$}'frameborder="0" allowfullscreen class="trailer_video"></iframe>`).show()}l=o("i3bGI");var B=o("bcxib");(new(0,l.default)).fetchGenres().then((e=>{(0,B.save)("genres",e.genres)}));
//# sourceMappingURL=index.3989c0c4.js.map
