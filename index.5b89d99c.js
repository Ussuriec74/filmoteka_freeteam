!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("hKHmD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),a.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return r.default(e)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}})),a.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),a.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),a.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return r.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(e,t)};var n,r=(n=a("8NIkP"))&&n.__esModule?n:{default:n}})),a("4Nugj");var o=a("4Nugj"),c=a("jcFG7"),l=a("18yUV"),i=a("bq49u"),s=new(0,l.default);function u(){s.fetchTrendingFilms().then(v)}function d(){s.fetchFilmsOnSearch().then(v)}u();var f=document.querySelector(".pagination ul");function m(e){if("LI"===e.target.nodeName){o.refs.gallery.innerHTML="";var t=document.querySelectorAll(".numb"),n=document.querySelector(".arrow-right"),r=document.querySelector(".arrow-left");e.target===r&&(s.pageDecrement(),null!==s.searchQuery&&""!==s.searchQuery?d():u());var a=!0,c=!1,l=void 0;try{for(var i,f=t[Symbol.iterator]();!(a=(i=f.next()).done);a=!0){var m=i.value;e.target===m&&(s.setPage(Number(e.target.textContent)),null!==s.searchQuery&&""!==s.searchQuery?d():u())}}catch(e){c=!0,l=e}finally{try{a||null==f.return||f.return()}finally{if(c)throw l}}e.target===n&&(s.pageIncrement(),null!==s.searchQuery&&""!==s.searchQuery?d():u())}}function v(e){var t=e.page,n=e.total_pages;(0,i.renderGallery)(e.results),(0,c.default)(n,t)}f.addEventListener("click",m),o.refs.searchForm.addEventListener("submit",(function(e){if(e.preventDefault(),s.resetPage(),s.query=e.target.elements.userSearchQuery.value.trim(),""===s.searchQuery||" "===s.searchQuery)return void o.refs.searchError.classList.remove("is-hidden");s.fetchFilmsOnSearch().then((function(e){if(0===e.total_results)return o.refs.searchError.classList.remove("is-hidden"),void f.removeEventListener("click",m);o.refs.searchError.classList.add("is-hidden"),d(),f.addEventListener("click",m)}))})),a("7F1pg"),a("gHeeA"),a("4xL4O"),a("j1lrD");var p=a("bpxeT"),g={};Object.defineProperty(g,"__esModule",{value:!0}),g.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b.default(e,t,n[t])}))}return e};var h,b=(h=a("hKHmD"))&&h.__esModule?h:{default:h};var y=a("2TvXO");l=a("18yUV");function _(e){var t=e.poster_path,n=e.title,r=e.vote_average,a=e.vote_count,o=e.popularity,c=e.original_title,l=e.listOfGenders,i=e.overview,s=e.id,u=t?"https://image.tmdb.org/t/p/w500".concat(t):"https://via.placeholder.com/270x400/5C5A5B/ffffff.png?text=NO+POSTER",d=i||"Unfortunately we have no discription about this film",f=c||"No Title",m=l||"Genres did not marked";return'\n    <div class="modal" data-modal-id="'.concat(s,'">\n        <div class="modal__poster">\n            <img\n                class="modal__img"\n                src="').concat(u,'"\n                alt="').concat(n,'"\n                />\n        </div>\n    \n        <div class="modal__content">\n            <h2 class="modal__content-title">').concat(n,'</h2>\n            <table class="modal__content-info">\n                <tr>\n                    <td class="modal__content-name">Vote / Votes</td>\n                    <td class="modal__content-name-value">\n                        <span class="modal__content-rate">').concat(r,'</span>\n                        /\n                        <span class="modal__content-rates">').concat(a,'</span>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Popularity</td>\n                    <td class="modal__content-name-value">').concat(o,'</td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Original Title</td>\n                    <td class="modal__content-name-value--title">').concat(f,'</td>\n                </tr>\n                <tr>\n                    <td class="modal__content-name">Genre</td>\n                    <td class="modal__content-name-value">').concat(m,'</td>\n                </tr>\n            </table>\n        \n            <div class="modal__about">\n                <h3 class="modal__about-title">About</h3>\n                <p class="modal__about-description">').concat(d,'</p>\n            </div>\n        \n            <div class="modal__btns">\n                <div class="modal__btns-wrapper">\n                    <button class="modal__btn add-to-watched" type="button" data-modalaction="').concat(s,'">\n                    Add to watched\n                    </button>\n                    <button class="modal__btn add-to-queue" type="button" data-modalaction="').concat(s,'">\n                    Add to queue\n                    </button>\n                </div>\n                <button  type="button" class="modal__btn player" data-player-action="').concat(s,'">watch the trailer</button>\n            </div>\n            <button class="modal__close" type="button" data-modal-close aria-label="close-modal">\n                <svg class="modal__close-svg" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M8 8L22 22" stroke="black" stroke-width="2"/>\n                    <path d="M8 22L22 8" stroke="black" stroke-width="2"/>\n                </svg>\n            </button>\n        </div>\n    </div>\n    ')}var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.default=function(e){return L.default(e)||x.default(e)||O.default(e)||T.default()};var L=S(a("kMC0W")),x=S(a("7AJDX")),T=S(a("8CtQK")),O=S(a("auk6i"));function S(e){return e&&e.__esModule?e:{default:e}}function k(t){return null!=localStorage.getItem("watchedFilms")&&!!e(w)(JSON.parse(localStorage.getItem("watchedFilms"))).includes(t)}function E(t){return null!=localStorage.getItem("queueFilms")&&!!e(w)(JSON.parse(localStorage.getItem("queueFilms"))).includes(t)}var M,I,N,C,A=function(e,t){var n=[t];try{var r=JSON.stringify(n);localStorage.setItem(e,r)}catch(e){console.error("You have an (ADD TO LOCAL STORAGE) error when add your first film: ",e.message)}},q=function(t,n){var r=e(w)(JSON.parse(localStorage.getItem(t)));console.log(r),r.push(n),console.log(r);try{var a=JSON.stringify(r);localStorage.setItem(t,a)}catch(e){console.error("You have an (ADD TO LOCAL STORAGE) error: ",e.message)}},F=function(t,n){var r=e(w)(JSON.parse(localStorage.getItem(t))),a=r.indexOf(n);r.splice(a,1);try{var o=JSON.stringify(r);localStorage.setItem(t,o)}catch(e){console.error("You have a (WRITING TO LOCAL STORAGE) error after REMOVING: ",e.message)}},D=new(0,l.default),P="",Q="Add to watched",j="Add to queue",W="Remove from watched",G="Remove from queue",U={gallery:document.querySelector(".gallery"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};function H(e){return J.apply(this,arguments)}function J(){return(J=e(p)(e(y).mark((function t(n){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),U.gallery.removeEventListener("click",H),M=n.target.dataset.id,"IMG"===n.target.nodeName){e.next=5;break}return e.abrupt("return");case 5:return Y(),e.next=8,B(M);case 8:U.addToWatched.addEventListener("click",z),U.addToQueue.addEventListener("click",Z);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}I="watchedFilms",N="queueFilms",C=[],localStorage.getItem(I)||localStorage.setItem(I,JSON.stringify(C)),localStorage.getItem(N)||localStorage.setItem(N,JSON.stringify(C)),U.gallery.addEventListener("click",H);var R,B=(R=e(p)(e(y).mark((function t(n){var r,a,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.fetchFilmById(n);case 3:return r=t.sent,t.next=6,r.genres.map((function(e){return e.name})).join(", ");case 6:return a=t.sent,o=e(g)({},r,{listOfGenders:a}),P=_(o),U.backdrop.innerHTML=P,U.closeFilmModalBtn=document.querySelector("[data-modal-close]"),U.addToWatched=document.querySelector(".add-to-watched"),U.addToQueue=document.querySelector(".add-to-queue"),t.next=15,ee(n);case 15:return t.next=17,te(n);case 17:return t.next=19,ne();case 19:return U.closeFilmModalBtn.addEventListener("click",V),U.backdrop.addEventListener("click",X),window.addEventListener("keydown",K),t.abrupt("return",U.backdrop);case 25:t.prev=25,t.t0=t.catch(0),console.log(t.t0.message);case 28:case"end":return t.stop()}}),t,null,[[0,25]])}))),function(e){return R.apply(this,arguments)});function V(e){e.preventDefault(),U.gallery.addEventListener("click",H),Y(),U.backdrop.innerHTML="",$()}function K(e){e.preventDefault(),"Escape"===e.code&&(U.gallery.addEventListener("click",H),Y(),U.backdrop.innerHTML="",$())}function X(e){e.preventDefault(),e.currentTarget===e.target&&(U.gallery.addEventListener("click",H),Y(),U.backdrop.innerHTML="",$())}function Y(){U.backdrop.classList.toggle("is-hidden")}function $(){U.closeFilmModalBtn.removeEventListener("click",V),window.removeEventListener("keydown",K),U.backdrop.removeEventListener("click",X)}function z(e){e.preventDefault(),M=e.target.dataset.modalaction,console.log(M),console.log("Ви натиснули на кнопку WATCHED, ID цієї картки - ",M),null==localStorage.getItem("watchedFilms")&&A("watchedFilms",M),k(M)?(F("watchedFilms",M),U.addToWatched.textContent=Q,U.addToWatched.classList.remove("is-in-storage")):(q("watchedFilms",M),U.addToWatched.textContent=W,U.addToWatched.classList.add("is-in-storage"))}function Z(e){e.preventDefault(),console.log("Ви натиснули на кнопку QUEUE, ID цієї картки - ",M),null==localStorage.getItem("queueFilms")&&A("queueFilms",M),E(M)?(F("queueFilms",M),U.addToQueue.textContent=j,U.addToQueue.classList.remove("is-in-storage")):(q("queueFilms",M),U.addToQueue.textContent=G,U.addToQueue.classList.add("is-in-storage"))}function ee(e){k(e)?k(e)&&(U.addToWatched.textContent=W):U.addToWatched.textContent=Q}function te(e){E(e)?E(e)&&(U.addToQueue.textContent=G):U.addToQueue.textContent=j}function ne(){U.addToWatched.textContent===Q?U.addToWatched.classList.remove("is-in-storage"):U.addToWatched.classList.add("is-in-storage"),U.addToQueue.textContent===j?U.addToQueue.classList.remove("is-in-storage"):U.addToQueue.classList.add("is-in-storage")}p=a("bpxeT"),y=a("2TvXO"),l=a("18yUV");var re={};re=function e(t,n,r){function a(c,l){if(!n[c]){if(!t[c]){var i=void 0;if(!l&&i)return i(c,!0);if(o)return o(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[c]={exports:{}};t[c][0].call(u.exports,(function(e){return a(t[c][1][e]||e)}),u,u.exports,e,t,n,r)}return n[c].exports}for(var o=void 0,c=0;c<r.length;c++)a(r[c]);return a}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=e.trim(),!0===t?n.children:n.firstChild},a=function(e,t){var n=e.children;return 1===n.length&&n[0].tagName===t},o=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};n.visible=o,n.create=function(e,t){var n=function(e,t){var n=r('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),o=n.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return o.appendChild(e)}));var c=a(o,"IMG"),l=a(o,"VIDEO"),i=a(o,"IFRAME");return!0===c&&n.classList.add("basicLightbox--img"),!0===l&&n.classList.add("basicLightbox--video"),!0===i&&n.classList.add("basicLightbox--iframe"),n}(e=function(e){var t="string"==typeof e,n=e instanceof HTMLElement==1;if(!1===t&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(r(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),c=function(e){return!1!==t.onClose(l)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===o(e)||e.parentElement.removeChild(e),t()}),410),!0}(n,(function(){if("function"==typeof e)return e(l)}))};!0===t.closable&&n.addEventListener("click",(function(e){e.target===n&&c()}));var l={element:function(){return n},visible:function(){return o(n)},show:function(e){return!1!==t.onShow(l)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(n,(function(){if("function"==typeof e)return e(l)}))},close:c};return l}},{}]},{},[1])(1);var ae,oe,ce=[],le=new(0,l.default),ie={gallery:document.querySelector(".gallery"),watchTrailer:""};function se(){return(se=e(p)(e(y).mark((function t(n){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("IMG"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:return ae=n.target.dataset.id,e.next=5,ue(ae);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}ie.gallery.addEventListener("click",(function(e){return se.apply(this,arguments)}));var ue=function(){var t=e(p)(e(y).mark((function t(n){var r;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.fetchTrailerById(n);case 3:r=e.sent,ce=[],r.results.forEach((function(e){if(e.name.includes("Official Trailer")){var t=e.key;ce.push("https://www.youtube.com/embed/".concat(t)),oe=ce[0]}})),setTimeout((function(){ie.watchTrailer=document.querySelector(".player"),ie.watchTrailer.addEventListener("click",de)}),500),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();function de(){re.create("\n    <iframe src='".concat(oe,'\'frameborder="0" allowfullscreen class="trailer_video"></iframe>')).show()}l=a("18yUV");var fe=a("9ekLB");(new(0,l.default)).fetchGenres().then((function(e){(0,fe.save)("genres",e.genres)}))}();
//# sourceMappingURL=index.5b89d99c.js.map
