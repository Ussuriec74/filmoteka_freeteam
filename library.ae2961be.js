!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("jcFG7"),r("7F1pg"),r("gHeeA"),r("4xL4O"),r("j1lrD");var o,d=r("bpxeT"),c=r("dDDEV"),u=r("2TvXO"),i=r("18yUV"),l=r("6D8Ko"),s=r("jzQFI"),m=(r("jzQFI"),s=r("jzQFI"),new(0,i.default)),f="",g="Add to watched",p="Add to queue",v="Remove from watched",h="Remove from queue",T={gallery:document.querySelector(".library-gallery__list"),backdrop:document.querySelector(".modal-backdrop"),closeFilmModalBtn:"",addToWatched:"",addToQueue:""};function L(e){return y.apply(this,arguments)}function y(){return(y=e(d)(e(u).mark((function t(n){return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),T.gallery.removeEventListener("click",L),o=n.target.dataset.id,"IMG"===n.target.nodeName){e.next=5;break}return e.abrupt("return");case 5:return q(),e.next=8,w(o);case 8:T.addToWatched.addEventListener("click",E),T.addToQueue.addEventListener("click",Q);case 10:case"end":return e.stop()}}),t)})))).apply(this,arguments)}(0,s.checkItemInStorage)("watchedFilms","queueFilms",[]),T.gallery.addEventListener("click",L);var k,w=(k=e(d)(e(u).mark((function t(n){var a,r,o;return e(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.fetchFilmById(n);case 3:return a=t.sent,t.next=6,a.genres.map((function(e){return e.name})).join(", ");case 6:return r=t.sent,o=e(c)({},a,{listOfGenders:r}),f=(0,l.filmModalMarkup)(o),T.backdrop.innerHTML=f,T.closeFilmModalBtn=document.querySelector("[data-modal-close]"),T.addToWatched=document.querySelector(".add-to-watched"),T.addToQueue=document.querySelector(".add-to-queue"),t.next=15,W(n);case 15:return t.next=17,B(n);case 17:return t.next=19,D();case 19:return T.closeFilmModalBtn.addEventListener("click",b),T.backdrop.addEventListener("click",x),window.addEventListener("keydown",F),t.abrupt("return",T.backdrop);case 25:t.prev=25,t.t0=t.catch(0),console.log(t.t0.message);case 28:case"end":return t.stop()}}),t,null,[[0,25]])}))),function(e){return k.apply(this,arguments)});function b(e){e.preventDefault(),T.gallery.addEventListener("click",L),q(),T.backdrop.innerHTML="",S()}function F(e){e.preventDefault(),"Escape"===e.code&&(T.gallery.addEventListener("click",L),q(),T.backdrop.innerHTML="",S())}function x(e){e.preventDefault(),e.currentTarget===e.target&&(T.gallery.addEventListener("click",L),q(),T.backdrop.innerHTML="",S())}function q(){T.backdrop.classList.toggle("is-hidden")}function S(){T.closeFilmModalBtn.removeEventListener("click",b),window.removeEventListener("keydown",F),T.backdrop.removeEventListener("click",x)}function E(e){e.preventDefault(),o=e.target.dataset.modalaction,console.log(o),console.log("Ви натиснули на кнопку WATCHED, ID цієї картки - ",o),null==localStorage.getItem("watchedFilms")&&(0,s.addToStorageWhenNull)("watchedFilms",o),(0,s.inStorageWatched)(o)?((0,s.removeFromStorage)("watchedFilms",o),T.addToWatched.textContent=g,T.addToWatched.classList.remove("is-in-storage")):((0,s.addToStorage)("watchedFilms",o),T.addToWatched.textContent=v,T.addToWatched.classList.add("is-in-storage"))}function Q(e){e.preventDefault(),console.log("Ви натиснули на кнопку QUEUE, ID цієї картки - ",o),null==localStorage.getItem("queueFilms")&&(0,s.addToStorageWhenNull)("queueFilms",o),(0,s.inStorageQueue)(o)?((0,s.removeFromStorage)("queueFilms",o),T.addToQueue.textContent=p,T.addToQueue.classList.remove("is-in-storage")):((0,s.addToStorage)("queueFilms",o),T.addToQueue.textContent=h,T.addToQueue.classList.add("is-in-storage"))}function W(e){(0,s.inStorageWatched)(e)?(0,s.inStorageWatched)(e)&&(T.addToWatched.textContent=v):T.addToWatched.textContent=g}function B(e){(0,s.inStorageQueue)(e)?(0,s.inStorageQueue)(e)&&(T.addToQueue.textContent=h):T.addToQueue.textContent=p}function D(){T.addToWatched.textContent===g?T.addToWatched.classList.remove("is-in-storage"):T.addToWatched.classList.add("is-in-storage"),T.addToQueue.textContent===p?T.addToQueue.classList.remove("is-in-storage"):T.addToQueue.classList.add("is-in-storage")}({headerButtons:document.querySelector(".header__buttons")}).headerButtons.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;var t=document.querySelector(".current__button"),n=e.target;t&&t.classList.remove("current__button");n.classList.add("current__button")}));i=r("18yUV");var _=r("9ekLB"),I=r("bq49u"),M={watchedBtn:document.querySelector('[name="watched"]'),queueBtn:document.querySelector('[name="queue"]')},C=new(0,i.default),N=(0,_.load)("queueFilms"),O=(0,_.load)("watchedFilms");function U(){(0,I.clearLibraryGallery)(),O.map((function(e){return C.fetchFilmById(e).then((function(e){(0,I.renderLibrary)(e)}))}))}U(),M.watchedBtn.addEventListener("click",U),M.queueBtn.addEventListener("click",(function(){(0,I.clearLibraryGallery)(),N.map((function(e){return C.fetchFilmById(e).then((function(e){(0,I.renderLibrary)(e)}))}))}))}();
//# sourceMappingURL=library.ae2961be.js.map
